{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const cardTemplate = cardInfo => {\n    return ` \n    <li class=\"photo-card\">\n        <a href=\"${cardInfo.largeImageURL}\">\n            <img src=\"${cardInfo.webformatURL}\" alt=\"${cardInfo.tags}\" />\n        </a>\n        <div class=\"info\">\n            <p>Likes: <span>${cardInfo.likes}</span></p>\n            <p>Views: <span>${cardInfo.views}</span></p>\n            <p>Comments: <span>${cardInfo.comments}</span></p>\n            <p>Downloads: <span>${cardInfo.downloads}</span></p>\n        </div>\n    </li>`;\n};\n","import axios from \"axios\";\n\nconst perPage = 15;\n\nexport const fetchPhotos = (searchedQuery, page) => {\n    const params = new URLSearchParams({\n        key: '48576644-2047f7a262d439c7b8152f8c6',\n        q: searchedQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: perPage,\n    });\n\n    return axios.get(`https://pixabay.com/api/?${params}`);\n};\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { cardTemplate } from './js/render-functions';\nimport { fetchPhotos } from './js/pixabay-api';\n\nconst searchForm = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loading = document.querySelector('.loading');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet searchedQuery = '';\nconst perPage = 15;\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 500,\n});\n\nconst searchFormSubmit = async event => {\n    try {\n        event.preventDefault();\n        gallery.innerHTML = '';\n        loadMoreButton.style.display = 'none';\n\n        searchedQuery = event.currentTarget.elements.query.value.trim();\n        currentPage = 1; // Reset page for a new search\n\n        if (searchedQuery === '') {\n            iziToast.show({\n                title: '',\n                backgroundColor: 'red',\n                messageColor: 'white',\n                position: 'topRight',\n                message: 'Please enter a search term!'\n            });\n            return;\n        }\n\n        loading.style.display = 'block';\n\n        const { data } = await fetchPhotos(searchedQuery, currentPage);\n\n        if (data.total === 0) {\n            iziToast.show({\n                title: '',\n                backgroundColor: 'red',\n                messageColor: 'white',\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n            loading.style.display = 'none';\n            return;\n        }\n\n        gallery.innerHTML = data.hits.map(el => cardTemplate(el)).join('');\n\n        lightbox.refresh();\n\n        loading.style.display = 'none';\n\n        if (data.total > perPage) {\n            loadMoreButton.style.display = 'block';\n        }\n\n        searchForm.reset();\n\n    } catch (error) {\n        console.log(error);\n        loading.style.display = 'none';\n    }\n};\n\nconst loadMoreImages = async () => {\n    try {\n        currentPage += 1;\n        loading.style.display = 'block';\n\n        const { data } = await fetchPhotos(searchedQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            loadMoreButton.style.display = 'none';\n            return;\n        }\n\n        const newGalleryHTML = data.hits.map(el => cardTemplate(el)).join('');\n        gallery.insertAdjacentHTML('beforeend', newGalleryHTML);\n\n        lightbox.refresh();\n        loading.style.display = 'none';\n        \n        const cardHeight = document.querySelector('.photo-card').getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n\n        if (currentPage * perPage >= data.totalHits) {\n            loadMoreButton.style.display = 'none';\n            iziToast.show({\n                title: '',\n                backgroundColor: 'blue',\n                messageColor: 'white',\n                position: 'topRight',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n\n    } catch (error) {\n        console.log(error);\n        loading.style.display = 'none';\n    }\n};\n\n\n\nsearchForm.addEventListener('submit', searchFormSubmit);\nloadMoreButton.addEventListener('click', loadMoreImages);\n"],"names":["cardTemplate","cardInfo","perPage","fetchPhotos","searchedQuery","page","params","axios","searchForm","gallery","loading","loadMoreButton","currentPage","lightbox","SimpleLightbox","searchFormSubmit","event","iziToast","data","el","error","loadMoreImages","newGalleryHTML","cardHeight"],"mappings":"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"}